from numpy import array


def cigre_b4_ac():
    """
    Power flow data for the AC part of the CIGRE B4 hybrid test network.
    Test network data is adopted from the official CIGRE report titled 
    "The CIGRE B4 DC Grid Test System".
    """
    # Initialize a dictionary to store the AC network data
    ppc = dict.fromkeys(['version', 'baseMVA', 'bus', 'gen', 'branch'])

    # Define the PYPOWER case format version
    ppc['version'] = '2'

    # Define the base MVA
    ppc['baseMVA'] = 100.0

    # Define the bus data
    # bus_i     type    Pd  Qd  Gs  Bs  area    Vm  Va  baseKV  zone    Vmax    Vmin
    ppc['bus'] = array([
        [10, 3, 0, 0, 0, 0, 1, 1, 0, 380, 1, 1.1, 0.9],
        [11, 1, -1000, 0, 0, 0, 1, 1, 0, 380, 1, 1.1, 0.9],
        [20, 3, 0, 0, 0, 0, 1, 1, 0, 380, 2, 1.1, 0.9],
        [21, 1, 1200, 0, 0, 0, 1, 1, 0, 380, 2, 1.1, 0.9],
        [22, 1, 1300, 0, 0, 0, 1, 1, 0, 380, 2, 1.1, 0.9],
        [23, 1, 900, 0, 0, 0, 1, 1, 0, 380, 2, 1.1, 0.9],
        [31, 3, -500, 0, 0, 0, 1, 1, 0, 145, 3, 1.1, 0.9],
        [32, 1, -500, 0, 0, 0, 1, 1, 0, 145, 3, 1.1, 0.9],
        [41, float('inf'), -1000, 0, 0, 0, 1, 1, 0, 145, 4, 1.1, 0.9],
        [51, float('inf'), 100, 0, 0, 0, 1, 1, 0, 145, 5, 1.1, 0.9],
        [61, float('inf'), -500, 0, 0, 0, 1, 1, 0, 145, 6, 1.1, 0.9]
    ])

    # Define the generator data
    # bus   Pg  Qg  Qmax    Qmin    Vg  mBase   status  Pmax    Pmin
    ppc['gen'] = array([
        [10, 0.0, 0.0, 999, -999, 1.00, 100, 1, 999, -999],
        [20, 0.0, 0.0, 999, -999, 1.00, 100, 1, 999, -999],
        [31, 0.0, 0.0, 999, -999, 1.00, 100, 1, 999, -999],
    ])

    # Define the branch data
    # from_bus  to_bus  r   x   b   rateA   rateB   rateC   ratio   angle   status
    ppc['branch'] = array([
        [10, 11, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [10, 11, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [20, 21, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [20, 22, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [20, 23, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [21, 23, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [22, 23, 0.002770083, 0.037124749, 1.224844144, 2339.827436, 2339.827436, 2339.827436, 1, 0, 1],
        [31, 32, 0.002918975, 0.018871969, 0.606687487, 179.5703675, 179.5703675, 179.5703675, 1, 0, 1],
    ])

    return ppc